//Саша и Таня играют в игру: на столе лежит куча деревянных палочек в количестве: 1 <= n <= 10^18. Если количество палочек четное то игрок может взять либо одну палочку либо половину от всех палочек. Если количество палочек нечетное - то игрок может взять только 1 палочку. Таня начинает игру. Рассчитайте какое количество палочек будет у Тани если Саша будет играть по стратегии - забрать как можно больше палочек.
import java.util.Scanner;

public class StickGameOptimal {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.print("Введите начальное количество палочек (1 <= n <= 10^18): ");
        long n = scanner.nextLong();
        scanner.close();

        long tanyaSticks = 0;
        boolean tanyaTurn = true;

        while (n > 0) {
            if ((n & 1) == 1) { // Если количество палочек нечётное
                n--; // Забираем одну палочку
            } else { // Если количество палочек чётное
                long half = n >> 1; // Взять половину палочек
                n -= half; // Оставляем вторую половину
            }

            if (tanyaTurn) {
                tanyaSticks += Math.max(n, 1); // Таня собирает столько палочек, сколько возможно
            }
            tanyaTurn = !tanyaTurn; // Переключаемся на следующий ход
        }

        System.out.println("Таня собрала " + tanyaSticks + " палочек");
    }
}
